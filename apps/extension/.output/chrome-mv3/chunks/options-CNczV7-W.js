import{c as E,j as e,r as c,s as l}from"./storage-cgBRVFaC.js";import"./_virtual_wxt-plugins-CDnz5Vh6.js";import"./index-CqD1M3E3.js";function R(){const[t,o]=c.useState(null),[y,b]=c.useState(!0),[v,h]=c.useState(!1),[d,m]=c.useState(""),[g,u]=c.useState("");c.useEffect(()=>{p()},[]);const p=async()=>{try{const s=await l.getSettings();o(s)}catch(s){console.error("設定の読み込みに失敗しました",s)}finally{b(!1)}},f=async()=>{if(t)try{await l.saveSettings(t),h(!0),setTimeout(()=>h(!1),2e3)}catch(s){console.error("設定の保存に失敗しました",s)}},r=(s,n)=>{t&&o({...t,[s]:n})},k=(s,n)=>{t&&o({...t,categorySettings:{...t.categorySettings,[s]:{enabled:n}}})},x=()=>{if(!t||!d.trim())return;const s=[...t.ngKeywords,d.trim()];r("ngKeywords",s),m("")},S=s=>{if(!t)return;const n=t.ngKeywords.filter(a=>a!==s);r("ngKeywords",n)},j=()=>{if(!t||!g.trim())return;const s=[...t.ngUsers,g.trim()];r("ngUsers",s),u("")},w=s=>{if(!t)return;const n=t.ngUsers.filter(a=>a!==s);r("ngUsers",n)},C=async()=>{const s=await l.exportSettings(),n=new Blob([s],{type:"application/json"}),a=URL.createObjectURL(n),i=document.createElement("a");i.href=a,i.download="youtube-ai-moderator-settings.json",i.click(),URL.revokeObjectURL(a)},U=async s=>{var i;const n=(i=s.target.files)==null?void 0:i[0];if(!n)return;const a=await n.text();try{await l.importSettings(a),await p(),alert("設定をインポートしました")}catch{alert("設定のインポートに失敗しました")}};if(y)return e.jsx("div",{className:"loading",children:"読み込み中..."});if(!t)return e.jsx("div",{className:"error",children:"設定の読み込みに失敗しました"});const K=[{key:"harassment",label:"直接攻撃",description:"侮辱語 + 対象指示/命令"},{key:"spoiler",label:"露骨ネタバレ",description:"核心的なネタバレ + 具体性"},{key:"recruiting",label:"勧誘・連絡誘導",description:"CTA + 連絡先/短縮URL"},{key:"repeat",label:"連投スパム",description:"同一内容の繰り返し"},{key:"impersonation",label:"なりすまし",description:"公式を騙る + 連絡誘導"},{key:"noise",label:"絵文字壁・ノイズ",description:"絵文字や記号の極端な壁"},{key:"nioase",label:"匂わせ",description:"情報リーク + 時系列"},{key:"hint",label:"ライブ匂わせ",description:"ライブチャット専用：直接示唆・伏せ字"},{key:"strongTone",label:"ライブ語気強",description:"ライブチャット専用：強い命令・記号壁"}];return e.jsxs("div",{className:"container",children:[e.jsxs("header",{className:"header",children:[e.jsx("h1",{children:"YouTube AI Moderator 設定"}),v&&e.jsx("div",{className:"saved-message",children:"設定を保存しました"})]}),e.jsxs("main",{className:"main",children:[e.jsxs("section",{className:"section",children:[e.jsx("h2",{children:"基本設定"}),e.jsx("div",{className:"setting-group",children:e.jsxs("label",{className:"setting-label",children:[e.jsx("input",{type:"checkbox",checked:t.enabled,onChange:s=>r("enabled",s.target.checked)}),"フィルターを有効にする"]})}),e.jsxs("div",{className:"setting-group",children:[e.jsx("label",{className:"setting-label",children:"表示モード"}),e.jsxs("select",{value:t.displayMode,onChange:s=>r("displayMode",s.target.value),className:"select",children:[e.jsx("option",{value:"hide",children:"非表示"}),e.jsx("option",{value:"blur",children:"ぼかし"})]})]}),e.jsxs("div",{className:"setting-group",children:[e.jsx("label",{className:"setting-label",children:"検出モード"}),e.jsxs("div",{className:"mode-info",children:[e.jsx("strong",{children:"厳格モード"})," - 1ヒット即ブロック（しきい値なし）"]})]})]}),e.jsxs("section",{className:"section",children:[e.jsx("h2",{children:"カテゴリ別設定"}),K.map(({key:s,label:n,description:a})=>e.jsxs("div",{className:"category-setting",children:[e.jsx("div",{className:"category-header",children:e.jsxs("label",{className:"category-label",children:[e.jsx("input",{type:"checkbox",checked:t.categorySettings[s].enabled,onChange:i=>k(s,i.target.checked)}),n]})}),e.jsx("div",{className:"category-description",children:a})]},s))]}),e.jsxs("section",{className:"section",children:[e.jsx("h2",{children:"NGキーワード"}),e.jsxs("div",{className:"ng-input-group",children:[e.jsx("input",{type:"text",value:d,onChange:s=>m(s.target.value),onKeyPress:s=>s.key==="Enter"&&x(),placeholder:"NGキーワードを入力",className:"input"}),e.jsx("button",{onClick:x,className:"add-button",children:"追加"})]}),e.jsx("div",{className:"ng-list",children:t.ngKeywords.map(s=>e.jsxs("div",{className:"ng-item",children:[e.jsx("span",{children:s}),e.jsx("button",{onClick:()=>S(s),className:"remove-button",children:"×"})]},s))})]}),e.jsxs("section",{className:"section",children:[e.jsx("h2",{children:"NGユーザー"}),e.jsxs("div",{className:"ng-input-group",children:[e.jsx("input",{type:"text",value:g,onChange:s=>u(s.target.value),onKeyPress:s=>s.key==="Enter"&&j(),placeholder:"NGユーザー名を入力",className:"input"}),e.jsx("button",{onClick:j,className:"add-button",children:"追加"})]}),e.jsx("div",{className:"ng-list",children:t.ngUsers.map(s=>e.jsxs("div",{className:"ng-item",children:[e.jsx("span",{children:s}),e.jsx("button",{onClick:()=>w(s),className:"remove-button",children:"×"})]},s))})]}),e.jsxs("section",{className:"section",children:[e.jsx("h2",{children:"インポート/エクスポート"}),e.jsxs("div",{className:"import-export",children:[e.jsx("button",{onClick:C,className:"button",children:"設定をエクスポート"}),e.jsxs("label",{className:"button",children:["設定をインポート",e.jsx("input",{type:"file",accept:".json",onChange:U,style:{display:"none"}})]})]})]}),e.jsx("div",{className:"save-section",children:e.jsx("button",{onClick:f,className:"save-button",children:"設定を保存"})})]})]})}const N=document.getElementById("root");N&&E(N).render(e.jsx(R,{}));
